{% extends 'baseMengherReset.html' %} {% block content %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>user profile</title>
  </head>

  <body class="profile-body">
    <div class="profilePage main-reg">
      <div style="text-align: center">
        {% load static%}
        <img
          class="profilePic"
          src="{% static 'images/USER.webp' %}"
          alt="user profile"
        />
        <h2 style="padding: 20px"><span id="username">{{username}}</span></h2>
        <h3 style="margin-bottom : 20px"><span id="Mail">{{email}}</span></h3>


        <button type="submit"  class="custom-button" id="deleteprofile">
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="#fff" stroke-width="1.5"></circle>
            <path d="M9 17C9.85038 16.3697 10.8846 16 12 16C13.1154 16 14.1496 16.3697 15 17" stroke="#fff" stroke-width="1.5" stroke-linecap="round"></path>
            <ellipse cx="15" cy="10.5" rx="1" ry="1.5" fill="#fff"></ellipse>
            <ellipse cx="9" cy="10.5" rx="1" ry="1.5" fill="#fff"></ellipse>
          </svg>
          <p>Delete Account</p>
        </button>
        <div id="deleteCard" class="card" style="display: none">
          <div class="card-content">
            <p class="card-heading">Delete Account?</p>
            <p class="card-description">
              Are you sure you want to delete your account?<br/> <br />This action cannot
              be undone
            </p>
          </div>
          <div class="card-button-wrapper">
            <button class="card-button secondary" id="cancelDelete">
              Cancel
            </button>
            <form method="POST" >
              {% csrf_token %}
              <button
                class="card-button primary"
                id="confirmDelete"
                type="submit"
                name="deleteaccount"
              >
                Delete
              </button>
            </form>
          </div>
          <button class="exit-button" id="exit-btn">
            <svg height="20px" viewBox="0 0 384 512">
              <path
                d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"
              ></path>
            </svg>
          </button>
        </div>
     


        <div
        id="modalBackdrop"
        style="
          display: none;
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.5);
          z-index: 999;
        "
      ></div>


      </div>
      <div id="user-details">
        <div class="buttons">
          <h3 style="padding: 10px; text-align: center; text-decoration: underline; text-decoration-thickness: 2px;   text-underline-offset: 8px">Borrowed Books</h3>
          <section class="books">
            {% for borrowed_book in borrowed_books %}
            <div>
              <a href="{% url 'book_details' id=borrowed_book.book.id %}">
                <img src="{{ borrowed_book.book.cover }}" alt="{{ borrowed_book.book.title }}" height="300px" width="200px" />
              </a>
              <div style="padding-top: 20px">
                <strong>{{ borrowed_book.book.title }} by {{ borrowed_book.book.author }}</strong>
              </div>
            </div>
            {% endfor %}
          </section>       
        </div>
      </div>
    </div>
    <script>
      document.getElementById("deleteprofile").addEventListener("click", function() {
        document.getElementById("deleteCard").style.display = "block";
        document.getElementById("modalBackdrop").style.display = "block";
        document.body.style.overflow = "hidden";
      });
      
      document.getElementById("cancelDelete").addEventListener("click", function() {
        document.getElementById("deleteCard").style.display = "none";
        document.getElementById("modalBackdrop").style.display = "none";
        document.body.style.overflow = "auto";
      });
      
      document.getElementById("exit-btn").addEventListener("click", function() {
        document.getElementById("deleteCard").style.display = "none";
        document.getElementById("modalBackdrop").style.display = "none";
        document.body.style.overflow = "auto";
      });
    </script>
  </body>
</html>
{% endblock %}
